<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo thửa + ảnh vệ tinh (mặc định)</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
  <link rel="stylesheet" href="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.css"/>

  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="topbar">
    <div class="brand">MAPDEMO</div>

    <div class="pillbar">
      <button class="pill active" data-tab="khuvuc">Khu vực</button>
      <button class="pill" data-tab="diadiem">Địa điểm</button>
      <button class="pill" data-tab="gocranh">Góc ranh</button>
      <button class="pill" data-tab="tothua">Tờ thửa</button>
    </div>

    <div class="right">
      <button id="btnTogglePanel" class="iconbtn" title="Bộ lọc">⚙️</button>
    </div>
  </div>

  <div id="map"></div>

  <aside id="panel" class="panel">
    <div class="panel-header">
      <div>
        <div class="panel-title">Lớp dữ liệu & Bộ lọc</div>
        <div class="panel-sub">Mặc định nền vệ tinh + chữ (gần kiểu GG)</div>
      </div>
      <button id="btnClosePanel" class="iconbtn" title="Đóng">✖</button>
    </div>

    <div class="section">
      <div class="section-title">Nền bản đồ</div>
      <label class="row"><input type="radio" name="basemap" id="rbSat" checked /> <span>Vệ tinh + chữ (Esri Imagery + Labels)</span></label>
      <label class="row"><input type="radio" name="basemap" id="rbOSM" /> <span>Bản đồ (OSM)</span></label>
      <div class="note">* Đây là nền vệ tinh miễn phí + lớp chữ tham chiếu để nhìn giống kiểu Google hơn.</div>
    </div>

    <div class="section">
      <div class="section-title">Lớp dữ liệu</div>
      <label class="row"><input type="checkbox" id="chkParcels" checked /> <span>Thửa đất (polygon)</span></label>
      <label class="row"><input type="checkbox" id="chkPlanning" checked /> <span>Quy hoạch (polygon)</span></label>
      <label class="row"><input type="checkbox" id="chkRoute" checked /> <span>Trục tuyến (line)</span></label>
      <label class="row"><input type="checkbox" id="chkListings" checked /> <span>Tin rao (points)</span></label>
    </div>

    <div class="section">
      <div class="section-title">Tìm tờ/thửa</div>
      <div class="row">
        <input id="inpTo" placeholder="Số tờ" />
        <input id="inpThua" placeholder="Số thửa" />
        <button id="btnFind" class="pill">Tìm</button>
      </div>
      <div class="hint">Demo: thử tờ 12/13/21 và thửa 100–111.</div>
    </div>

    <div class="section">
      <div class="section-title">Lọc giá (tỷ / m²)</div>
      <div id="priceSlider"></div>
      <div class="hint"><span id="priceMin"></span> → <span id="priceMax"></span></div>
    </div>

    <div class="section">
      <div class="section-title">Lọc diện tích (m²)</div>
      <div id="areaSlider"></div>
      <div class="hint"><span id="areaMin"></span> → <span id="areaMax"></span></div>
    </div>

    <div class="section">
      <div class="section-title">Góc ranh (demo)</div>
      <div class="note">
        Bấm 2 điểm để đo nhanh khoảng cách. Nếu muốn vẽ ranh thửa/đường bao, có thể thêm Leaflet.draw (miễn phí).
      </div>
    </div>
  </aside>

  <div id="toast" class="toast" hidden></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="https://unpkg.com/nouislider@15.7.1/dist/nouislider.min.js"></script>

  <script src="./app.js"></script>
</body>
</html>
